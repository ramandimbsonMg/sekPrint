{% extends "base.html" %} {% block title %}Dashboard{% endblock %} {% block content %}
<div class="bg-gray-100">
  <div class="max-w-6xl">
    <h1 class="text-3xl font-bold text-blue-700 mb-2">
      Bienvenue, {{ request.user.username }} ðŸ‘‹
    </h1>

    <!-- Cartes RÃ©sumÃ©es -->
    <div class="grid grid-cols-3 md:grid-cols-3 gap-6 mb-3">
      <!-- Ã‰tudiants inscrits -->
      <div class="bg-white shadow rounded-lg p-4">
        <div class="mb-2">
          <!-- SVG Ã‰tudiants -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            class="bi bi-people-fill w-8 h-8 text-blue-500"
            viewBox="0 0 16 16"
          >
            <path
              d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"
            />
          </svg>
        </div>
        <div class="lg:flex lg:justify-between">
          <h2 class="text-gray-600 text-sm">Ã‰tudiants inscrits</h2>
          <p class="text-3xl font-bold text-blue-600">{{ etudiants_count }}</p>
        </div>
      </div>

      <!-- Ã‰coles crÃ©Ã©es -->
      <div class="bg-white shadow rounded-lg p-2">
        <div class="mb-2">
          <!-- SVG Ã‰coles -->
          <svg
            class="w-8 h-8 text-green-500"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path d="M10 2L2 7l8 5 8-5-8-5zm0 11l-6-3.6v4.6h12v-4.6L10 13z" />
          </svg>
        </div>
        <div class="lg:flex lg:justify-between">
          <h2 class="text-gray-600 text-sm">Ã‰coles crÃ©Ã©es</h2>
          <p class="text-3xl font-bold text-green-600">{{ ecoles_count }}</p>
        </div>
      </div>

      <!-- Classes actives -->
      <div class="bg-white shadow rounded-lg p-2">
        <div class="mb-2">
          <!-- SVG Classes -->
          <svg
            class="w-8 h-8 text-purple-500"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M4 3h12a1 1 0 011 1v2H3V4a1 1 0 011-1zm-1 5h14v9a1 1 0 01-1 1H4a1 1 0 01-1-1V8z"
            />
          </svg>
        </div>
        <div class="lg:flex lg:justify-between">
          <h2 class="text-gray-600 text-sm">Classes actives</h2>
          <p class="text-3xl font-bold text-purple-600">{{ classes_count }}</p>
        </div>
      </div>
    </div>

    <!-- Section du Graphique -->
    <div class="bg-white rounded shadow p-2">
      <h2 class="text-xl font-bold text-gray-800 mb-4">
        RÃ©partition des Ã©tudiants
      </h2>
      <div
        id="studentsChart"
        data-etudiants="{{ etudiants_count|default:0 }}"
        data-ecoles="{{ ecoles_count|default:0 }}"
        data-classes="{{ classes_count|default:0 }}"
        class="w-full max-w-6xl mx-auto"
      ></div>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const chartEl = document.querySelector("#studentsChart");

      if (chartEl) {
        const options = {
          chart: {
            type: "bar",
            height: 320,
            toolbar: { show: false },
          },
          series: [
            {
              name: "Total",
              data: [
                parseInt(chartEl.dataset.etudiants) || 0,
                parseInt(chartEl.dataset.ecoles) || 0,
                parseInt(chartEl.dataset.classes) || 0,
              ],
            },
          ],
          xaxis: {
            categories: ["Ã‰tudiants", "Ã‰coles", "Classes"],
            labels: { style: { fontSize: "14px", colors: "#475569" } },
          },
          plotOptions: {
            bar: { columnWidth: "20%", distributed: true },
          },
          fill: {
            colors: ["#2563eb", "#16a34a", "#7c3aed"],
          },
          dataLabels: {
            enabled: true,
            style: { colors: ["#111"] },
          },
          tooltip: {
            theme: "light",
          },
        };

        const chart = new ApexCharts(chartEl, options);
        chart.render();
      }
    });
  </script>
</div>

{% endblock %}
